# 快速參考指南 — Arduino 3D 掃描系統

## 🚀 快速開始

```bash
python main_ui.py
```

---

## 📊 標籤頁 1: 3D 重建

### 功能區域

| 區域 | 控制項 | 用途 |
|------|--------|------|
| **參數** | Grid size, Num images | 調整重建精度 |
| **按鈕** | 重建、載入、開啟資料夾 | 觸發操作 |
| **3D 檢視** | 互動式 3D 點雲 | 查看結果 |
| **日誌** | 實時執行訊息 | 追蹤進度 |

### 常用操作

#### A. 快速重建
```
1. 參數維持預設 (Grid=40, Images=8)
2. 點擊【重建 (Rebuild)】
3. 等待完成 (5-30 秒)
4. 3D 檢視自動顯示結果
```

#### B. 載入現有 PLY
```
1. 點擊【載入並顯示 PLY】
2. 選擇 scan_images/result_visual_hull.ply
3. 3D 檢視顯示已加載的點雲
```

#### C. 調整精度
```
1. 修改 Grid size (數值越小越精細，速度越慢)
   - 20 = 超高精度 (最慢)
   - 40 = 標準精度 (推薦)
   - 60 = 低精度 (最快)
2. 勾選【強制重建】
3. 點擊【重建】
```

---

## ✓ 標籤頁 2: 檢查清單

### 9 項目狀態

| # | 項目 | 圖示 | 說明 |
|----|------|------|------|
| 1 | 硬體偵測 | ○ | (待 Arduino 驅動) |
| 2 | Serial 配置 | ○ | (待 Arduino 驅動) |
| 3 | WiFi 連線 | ○ | (待 Arduino 驅動) |
| 4 | 轉盤校準 | ○ | (待 Arduino 驅動) |
| 5 | 影像擷取 | ○ | (待 Arduino 驅動) |
| 6 | 影像處理 | ○ | (待 Arduino 驅動) |
| 7 | 體素雕刻 | ⟳ | (執行重建時更新) |
| 8 | 結果匯出 | ✓ | (重建完成時更新) |
| 9 | 視覺化 | ✓ | (完成顯示時更新) |

### 狀態指示

| 狀態 | 圖示 | 顏色 | 意義 |
|------|------|------|------|
| 待處理 | ○ | 灰 | 等待中 |
| 進行中 | ⟳ | 藍 | 執行中 (旋轉) |
| 成功 | ✓ | 綠 | 完成 |
| 失敗 | ✗ | 紅 | 錯誤 |

### 控制按鈕

- **▶ 開始掃描** — 啟動硬體檢查 (待實現)
- **⏹ 停止** — 中止操作 (待實現)
- **↻ 重設** — 清除所有狀態
- **💾 匯出結果** — 保存結果 (待實現)

---

## 🎨 3D 檢視控制

### 滑鼠操作

| 操作 | 效果 |
|------|------|
| 左鍵拖曳 | 旋轉視角 |
| 右鍵拖曳 | 平移視角 |
| 滾輪 | 縮放 |
| 雙擊 | 重設視角 |

### 鍵盤快捷鍵

| 鍵 | 效果 |
|----|------|
| R | 重置軸範圍 |
| G | 顯示/隱藏網格 |
| H | 顯示幫助 |

---

## 📝 日誌訊息解讀

### 成功訊息

```
✓ 已找到 scan_images/result_visual_hull.ply，可直接載入或重建。
✓ 重建完成，自動載入 PLY...
✓ 載入 result_visual_hull.ply (3840 點)
✓ ConvexHull: 5280 三角形
```

### 警告訊息

```
⚠ 找不到 PLY 檔。請按下【重建】或【載入並顯示】。
⚠ 正在建立 PLY，請稍候...
⚠ ConvexHull 計算失敗: ...
```

### 錯誤訊息

```
✗ 正在建立 PLY，請稍候...
✗ PLY 建立失敗
✗ 載入 PLY 失敗: ...
✗ 建立出錯: ...
```

---

## 🔧 參數說明

### Grid size
- **範圍:** 1-100
- **預設:** 40
- **意義:** 3D 重建網格精度
  - 數值越小 = 點雲越密集 (精度高，速度慢)
  - 數值越大 = 點雲越稀疏 (精度低，速度快)
- **建議值:** 40 (標準)

### Num images
- **範圍:** 1-36
- **預設:** 8
- **意義:** 掃描影像張數 (等角分佈)
  - 8 = 360° ÷ 8 = 45° 間隔 (標準)
  - 4 = 90° 間隔 (快速，低精度)
  - 16 = 22.5° 間隔 (高精度，慢速)
- **建議值:** 8 (標準)

### 強制重建
- **作用:** 忽略現有 PLY，強制重新執行完整重建
- **預設:** 未勾選
- **何時使用:** 
  - 更改參數後
  - 更新掃描影像後
  - 懷疑 PLY 已損壞時

---

## 📁 檔案結構

```
arduino 3d scan/
├── main_ui.py                    ← 【執行這個】
├── build_ply.py                  ← PLY 自動構建
├── reconstruct_simple.py         ← Visual Hull 演算
├── check_interface.py            ← 原始檢查清單 (參考)
├── view_ply.py                   ← 獨立 PLY 檢視器
├── scan_images/
│   ├── result_visual_hull.ply    ← 重建結果 (自動生成)
│   ├── image_0.jpg               ← 0° 影像
│   ├── image_45.jpg              ← 45° 影像
│   └── ...                        ← 更多影像
├── INTEGRATION_COMPLETE.md       ← 完整整合報告
├── INTEGRATION_SUMMARY.md        ← 詳細設計文檔
├── test_integration.py           ← 整合驗證測試
└── README_QUICK.md               ← 本文檔
```

---

## 🐛 故障排除

### 問題 1: PLY 檔案無法載入

**症狀:** 提示「找不到 PLY 檔」

**解決方案:**
```
1. 點擊【重建】
2. 等待 "✓ 重建完成" 訊息
3. 自動載入會觸發
4. 如仍失敗，檢查 scan_images/ 資料夾是否存在
```

### 問題 2: 3D 檢視顯示為空

**症狀:** 3D 畫布顯示 "No points"

**解決方案:**
```
1. 檢查日誌是否有 "PLY 建立失敗" 訊息
2. 點擊【強制重建】並重試
3. 檢查 scan_images 中是否有 8 張影像
4. 嘗試更改 Grid size 為 20 (更容易生成點雲)
```

### 問題 3: 重建非常緩慢

**症狀:** 重建超過 1 分鐘

**解決方案:**
```
1. 增加 Grid size (改為 60)
2. 減少 Num images (改為 4)
3. 檢查系統 CPU 使用率
4. 關閉其他應用程式
```

### 問題 4: 檢查清單項目不更新

**症狀:** 項目 6-9 保持 ○ 狀態

**解決方案:**
```
1. 檢查是否在正確的標籤頁上
2. 點擊【重建】而不是【載入並顯示】
3. 如已完成，項目應變為 ✓ (綠色)
4. 點擊【重設】清除舊狀態後重試
```

---

## 💡 提示

✅ **第一次使用:** 保持預設參數，直接點擊【重建】

✅ **保存結果:** 重建完成後手動複製 `scan_images/result_visual_hull.ply` 到備份位置

✅ **檢查進度:** 同時監看【日誌】區和【檢查清單】區

✅ **重新開始:** 點擊【✓ 檢查清單】標籤中的【↻ 重設】按鈕

✅ **效能調整:** 低端系統可使用 Grid=60, Images=4 快速測試

---

## 📞 支援

- **問題回報:** 檢查日誌輸出中的 ✗ 錯誤訊息
- **效能問題:** 調整 Grid size 和 Num images 參數
- **功能缺陷:** 項目 1-5 (硬體相關) 待 Arduino 驅動完成

---

## 版本資訊

- **應用名稱:** Arduino 3D Scan — 主控介面
- **整合版本:** 2.0 (包含 ChecklistFrame)
- **最後更新:** 2024-12-19
- **狀態:** ✅ 生產就緒

---

**🎯 享受您的 3D 掃描體驗！**
